<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{manager/layouts/layout-manager.html}">
<head>
	<meta charset="UTF-8">
	<title>Thông tin cá nhân</title>
	<link rel="stylesheet"
		th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css}">
</head>
<body>
	<div layout:fragment="content">
		<div class="container mt-5" style="max-width: 500px;">
			<h2 class="text-center mb-4">Thông tin cá nhân</h2>

			<!-- Form dùng DTO và hỗ trợ validate -->
			<form th:action="@{/manager/profile}" th:object="${userProfile}" method="post"
				enctype="multipart/form-data" class="needs-validation" novalidate>

				<!-- Họ tên -->
				<div class="mb-3">
					<label for="fullname" class="form-label">Họ tên:</label>
					<input type="text" class="form-control" id="fullname" th:field="*{fullname}"
						placeholder="Nhập họ tên">
					<div class="text-danger" th:if="${#fields.hasErrors('fullname')}" th:errors="*{fullname}"></div>
				</div>

				<!-- Số điện thoại -->
				<div class="mb-3">
					<label for="phone" class="form-label">Số điện thoại:</label>
					<input type="text" class="form-control" id="phone" th:field="*{phone}"
						placeholder="Nhập số điện thoại">
					<div class="text-danger" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
				</div>

				<!-- Ảnh đại diện -->
				<div class="mb-3">
					<label for="image" class="form-label">Ảnh đại diện:</label>
					<div class="avatar-frame mb-2"
						style="width: 300px; height: 300px; border: 1px solid #ddd; border-radius: 50%; overflow: hidden; display: flex; align-items: center; justify-content: center;">
						<img th:if="${user.image != null}"
							th:src="@{/image(fname=${user.image})}" alt="Avatar"
							style="max-width: 100%; max-height: 100%; object-fit: cover; border-radius: 50%;">
					</div>
					<input type="file" class="form-control" id="image" name="image" accept="image/*">
				</div>

				<!-- Nút submit -->
				<button type="submit" class="btn btn-success w-100 mt-3">Cập nhật</button>
			</form>
		</div>
	</div>

	<!-- Optional JS -->
	<script th:src="@{https://code.jquery.com/jquery-3.5.1.slim.min.js}"></script>
	<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
